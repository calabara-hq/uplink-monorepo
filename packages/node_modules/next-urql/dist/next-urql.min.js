Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),r=require("react-ssr-prepass"),n=require("urql"),a=require("@urql/core"),i=null;function l(){i=null}function s(e,t){var r="undefined"==typeof window;return!r&&i||((i=a.createClient({...e,suspense:t&&(r||e.suspense)})).toJSON=()=>null),i}exports.initUrqlClient=s,exports.withUrqlClient=function(a,i){return i||(i={}),u=>{var o=Boolean((u.getInitialProps||i.ssr)&&!i.neverSuspend),p=({pageProps:r,urqlClient:p,urqlState:c,...d})=>{var[g,h]=t.useReducer((e=>e+1),0),v=r&&r.urqlState||c,q=t.useMemo((()=>{if(p&&!g)return p;e&&"undefined"!=typeof window?g||e.restoreData(v):e=n.ssrExchange({initialState:v,isClient:!0,staleWhileRevalidate:"undefined"!=typeof window?i.staleWhileRevalidate:void 0});var t=a(e);return t.exchanges||(t.exchanges=[n.dedupExchange,n.cacheExchange,e,n.fetchExchange]),s(t,o)}),[p,v,g]),f=t.useCallback((()=>{l(),e=n.ssrExchange({initialState:void 0}),h()}),[]);return t.createElement(n.Provider,{value:q},t.createElement(u,{...d,pageProps:r,urqlClient:q,resetUrqlClient:f}))};return p.displayName=`withUrqlClient(${u.displayName||u.name||"Component"})`,u.getLayout&&(p.getLayout=u.getLayout),(u.getInitialProps||i.ssr)&&(p.getInitialProps=async e=>{var l=e.AppTree,o=!!e.Component,p=o?e.ctx:e,c=n.ssrExchange({initialState:void 0}),d=a(c,p);d.exchanges||(d.exchanges=[n.dedupExchange,n.cacheExchange,c,n.fetchExchange]);var g=s(d,!i.neverSuspend);g&&(p.urqlClient=g);var h={};if(u.getInitialProps&&(h=await u.getInitialProps(e),p.res&&(p.res.writableEnded||p.res.finished)))return{...h,urqlClient:g};if("undefined"!=typeof window)return{...h,urqlClient:g};var v={...h,urqlClient:g},q=o?{pageProps:{},...v}:{pageProps:v};return i.neverSuspend||await r(t.createElement(l,q)),{...h,urqlState:c?c.extractData():void 0,urqlClient:g}}),p}};
//# sourceMappingURL=next-urql.min.js.map
